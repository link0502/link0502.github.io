<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 301跳转代码php实例 · link0502</title><meta name="description" content="301跳转代码php实例 - Mr.Leng"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://weibo.com/link0502/atom.xml" title="link0502"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">link0502</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>现在</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>曾经</p></a><ul class="shortcut-icons"><a href="https://github.com/link0502" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">301跳转代码php实例</h1><div class="post-info">Nov 18, 2016</div><div class="post-content"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line"><span class="variable">$the_host</span> = <span class="variable">$_SERVER</span>[<span class="string">'HTTP_HOST'</span>];//取得当前域名</span><br><span class="line"><span class="variable">$the_url</span> = isset(<span class="variable">$_SERVER</span>[<span class="string">'REQUEST_URI'</span>]) ? <span class="variable">$_SERVER</span>[<span class="string">'REQUEST_URI'</span>] : <span class="string">''</span>;//判断地址后面部分</span><br><span class="line"><span class="variable">$the_url</span> = strtolower(<span class="variable">$the_url</span>);//将英文字母转成小写</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$the_url</span>==<span class="string">"/index.php"</span>)//判断是不是首页</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$the_url</span>=<span class="string">"/"</span>;//如果是首页，赋值为“/”</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$the_host</span> !== <span class="string">'www.lyfht.cn'</span>)//如果域名不是带www的网址那么进行下面的301跳转</span><br><span class="line">&#123;</span><br><span class="line">header(<span class="string">'HTTP/1.1 301 Moved Permanently'</span>);//发出301头部 </span><br><span class="line">header(<span class="string">'Location:http://www.lyfht.cn'</span>.<span class="variable">$the_url</span>);//跳转到带www的网址</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>PHP代码下载：<a href="http://nav.ewwe.net/share/301.rar" target="_blank" rel="noopener">301文件.rar</a></p>
<p>可以新建名为301的文件夹，然后将下载好的代码放到里面。然后将不带www的域名指向这个文件夹即可。</p>
</div></article></div></div></main><footer class="footer-container"><div class="paginator"><a href="/2017/11/29/虚拟机最小化安装centos7 之一《网络设置》/" class="prev">PREV</a><a href="/2015/07/12/关于本站/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://weibo.com/link0502">Mr.Leng</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer></body></html>